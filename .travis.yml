language: node_js
node_js:
  - 12.4.0
cache: npm
stages:
  - test
  - publish
jobs:
  include:
    - stage: test
      name: "\U0001F5DC️ Run tests"
      script: npm run test:coverage
    - stage: publish
      name: Publish to npm
      script: npm run publish
      if: tag IS present
after_success:
  - npx codecov
