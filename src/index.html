<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
    />
    <title>Stencil Component Starter</title>

    <script type="module" src="/build/shadowcat.esm.js"></script>
    <script nomodule src="/build/shadowcat.js"></script>
  </head>
  <body>
    <!-- Our typical oauth workflow using puma includes several server-side
      redirects in order to get the auth token. This component tests a similar
      workflow using the mock server. -->
    <manifold-oauth
      id="server-side"
      oauth-url="https://manifold-shadowcat-test-server.herokuapp.com/signin/oauth/web"
    ></manifold-oauth>

    <!-- Some platform-providers may want their oauth flow to include a
      client-side redirect. This component tests that workflow using a different
      endpoint on the mock server. -->
    <manifold-oauth
      id="client-side"
      oauth-url="https://manifold-shadowcat-test-server.herokuapp.com/signin/oauth/redirect"
    ></manifold-oauth>

    <script>
      //These event listeners will be implemented as needed inside of our UI
      //library and the resulting auth tokens are logged here for testing purposes.
      const serverOauth = document.querySelector("#server-side");
      serverOauth.addEventListener("receiveManifoldToken", e => {
        console.log("server-side: ", e.detail);
      });

      const clientOauth = document.querySelector("#client-side");
      clientOauth.addEventListener("receiveManifoldToken", e => {
        console.log("client-side: ", e.detail);
      });
    </script>
  </body>
</html>
